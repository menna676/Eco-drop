<!DOCTYPE html>
<html class="light-theme" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Ecodrop - Historical Data</title>
    <link href="styles.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/1.4.0/chartjs-plugin-annotation.min.js"></script>
  </head>
  <body>
    <div class="site-header">
      <h1 class="app-title">ecodrop</h1>
      <nav class="main-nav">
        <ul>
          <li>
            <a href="tank-detail.html" class="nav-item">
              <i class="fas fa-tachometer-alt"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="home.html" class="nav-item">
              <i class="fas fa-microchip"></i>
              <span>Device</span>
            </a>
          </li>
          <li>
            <a href="dashboard.html" class="nav-item active">
              <i class="fas fa-chart-line"></i>
              <span>Historical Data</span>
            </a>
          </li>
          <li>
            <a href="alerts.html" class="nav-item">
              <i class="fas fa-bell"></i>
              <span>Alerts</span>
            </a>
          </li>
          <li>
            <a href="settings.html" class="nav-item">
              <i class="fas fa-cog"></i>
              <span>Settings</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <div id="dashboardPage" class="page active">
      <div class="container">
        <div class="header">
          <div class="header-left">
            <h1>Charts</h1>
          </div>
          <select id="parameter-select" style="display: none"></select>
        </div>

        <div class="dashboard-controls"></div>

        <div id="dashboardSelectionContainer" style="margin-bottom: 20px">
          <label
            for="dashboardTankIdInput"
            style="margin-right: 10px; font-weight: bold"
            >Choose Tank ID:</label
          >
          <input
            type="number"
            id="dashboardTankIdInput"
            placeholder="Enter Tank ID"
            style="padding: 8px; width: 150px"
          />
          <select id="parameterSelect" style="padding: 8px; margin-left: 20px">
            <option value="PH">PH</option>
            <option value="TDS">TDS</option>
            <option value="DO">DO</option>
            <option value="TURB">Turbidity</option>
            <option value="TEMP">Temperature</option>
          </select>
        </div>

        <div class="parameter-card">
          <div class="chart-parameter-info">
            <h2 id="parameter-name"></h2>
            <p id="parameter-range"></p>
            <p id="parameter-name-info" style="display: none"></p>
            <div class="gauge-container">
              <svg height="150" width="300">
                <circle
                  cx="150"
                  cy="120"
                  fill="none"
                  r="60"
                  stroke="#ddd"
                  stroke-width="8"
                />
                <path
                  d="M90,120 A60,60 0 1,1 210,120"
                  fill="none"
                  id="gauge-progress"
                  stroke-width="8"
                />
              </svg>
              <div id="gauge-value"></div>
            </div>
            <button id="info-button">
              <i class="fas fa-info-circle"></i> Parameter Overview
            </button>
          </div>
        </div>
        <div class="time-navigation">
          <h3 id="data-title">Weekly Data</h3>
          <div class="nav-buttons">
            <button class="active" data-view="week" id="week-tab">
              This Week
            </button>
            <button data-view="lastWeek" id="last-week-tab">Last Week</button>
            <button data-view="month" id="month-tab">Month</button>
            <button data-view="hour" id="view-hour-button">Hourly</button>
          </div>
        </div>

        <div class="date-range">
          <input id="start-date" placeholder="Start Date" type="date" />
          <input id="end-date" placeholder="End Date" type="date" />
          <button id="custom-range">Apply Range</button>
        </div>
        <div id="chart-container"></div>
      </div>
      <div id="info-modal">
        <div class="modal-content">
          <h2 id="modal-title"></h2>
          <p id="modal-description"></p>
          <p><strong>Ideal Range:</strong> <span id="modal-range"></span></p>
          <p><strong>How to Fix:</strong></p>
          <p id="modal-fix-info"></p>
        </div>
      </div>
    </div>
    <!-- 1) Firebase core (compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>

    <!-- 2) Firebase products you need (compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-database-compat.js"></script>

    <!-- 3) Your config + init -->
    <script src="firebase.js"></script>
    <script type="module" src="./js/main.js"></script>
    <script type="module" src="./js/historicalData.js"></script>
  </body>
</html>
